{"ast":null,"code":"'use strict';\n\nimport { logger } from \"./logger.js\";\nimport { WorkletsError } from \"./WorkletsError.js\";\nconst handleCache = new WeakMap();\nexport function bundleValueUnpacker(objectToUnpack, category, remoteFunctionName) {\n  const workletHash = objectToUnpack.__workletHash;\n  if (workletHash !== undefined) {\n    return getWorklet(workletHash, objectToUnpack.__closure);\n  } else if (objectToUnpack.__init !== undefined) {\n    let value = handleCache.get(objectToUnpack);\n    if (value === undefined) {\n      value = objectToUnpack.__init();\n      handleCache.set(objectToUnpack, value);\n    }\n    return value;\n  } else if (category === 'RemoteFunction') {\n    const remoteFunctionHolder = () => {\n      const label = remoteFunctionName ? `function \\`${remoteFunctionName}\\`` : 'anonymous function';\n      throw new WorkletsError(`Tried to synchronously call a non-worklet ${label} on the UI thread.\nSee https://docs.swmansion.com/react-native-reanimated/docs/guides/troubleshooting#tried-to-synchronously-call-a-non-worklet-function-on-the-ui-thread for more details.`);\n    };\n    remoteFunctionHolder.__remoteFunction = objectToUnpack;\n    return remoteFunctionHolder;\n  } else {\n    throw new WorkletsError(`Data type in category \"${category}\" not recognized by value unpacker: \"${globalThis._toString(objectToUnpack)}\".`);\n  }\n}\nfunction getWorklet(workletHash, closureVariables) {\n  let worklet;\n  if (__DEV__) {\n    try {\n      worklet = getWorkletFromMetroRequire(workletHash, closureVariables);\n    } catch (_e) {\n      logger.error('Unable to resolve worklet with hash ' + workletHash + '. Try reloading the app.');\n    }\n  } else {\n    worklet = getWorkletFromMetroRequire(workletHash, closureVariables);\n  }\n  return worklet;\n}\nconst metroRequire = globalThis.__r;\nfunction getWorkletFromMetroRequire(workletHash, closureVariables) {\n  const factory = metroRequire(workletHash).default;\n  return factory(closureVariables);\n}","map":{"version":3,"names":["logger","WorkletsError","handleCache","WeakMap","bundleValueUnpacker","objectToUnpack","category","remoteFunctionName","workletHash","__workletHash","undefined","getWorklet","__closure","__init","value","get","set","remoteFunctionHolder","label","__remoteFunction","globalThis","_toString","closureVariables","worklet","__DEV__","getWorkletFromMetroRequire","_e","error","metroRequire","__r","factory","default"],"sources":["C:\\Users\\prana\\OneDrive\\Desktop\\civic-reporter-sih\\frontend\\node_modules\\react-native-worklets\\src\\bundleUnpacker.ts"],"sourcesContent":["'use strict';\nimport { logger } from './logger';\nimport { WorkletsError } from './WorkletsError';\nimport type { WorkletFactory, WorkletFunction } from './workletTypes';\n\nconst handleCache = new WeakMap<WorkletFunction, unknown>();\n\nexport function bundleValueUnpacker(\n  objectToUnpack: ObjectToUnpack,\n  category?: string,\n  remoteFunctionName?: string\n): unknown {\n  const workletHash = objectToUnpack.__workletHash;\n  if (workletHash !== undefined) {\n    return getWorklet(workletHash, objectToUnpack.__closure);\n  } else if (objectToUnpack.__init !== undefined) {\n    let value = handleCache.get(objectToUnpack);\n    if (value === undefined) {\n      value = objectToUnpack.__init();\n      handleCache.set(objectToUnpack, value);\n    }\n    return value;\n  } else if (category === 'RemoteFunction') {\n    const remoteFunctionHolder = () => {\n      const label = remoteFunctionName\n        ? `function \\`${remoteFunctionName}\\``\n        : 'anonymous function';\n      throw new WorkletsError(`Tried to synchronously call a non-worklet ${label} on the UI thread.\nSee https://docs.swmansion.com/react-native-reanimated/docs/guides/troubleshooting#tried-to-synchronously-call-a-non-worklet-function-on-the-ui-thread for more details.`);\n    };\n    remoteFunctionHolder.__remoteFunction = objectToUnpack;\n    return remoteFunctionHolder;\n  } else {\n    throw new WorkletsError(\n      `Data type in category \"${category}\" not recognized by value unpacker: \"${globalThis._toString(\n        objectToUnpack\n      )}\".`\n    );\n  }\n}\n\nfunction getWorklet(\n  workletHash: number,\n  closureVariables: Record<string, unknown>\n): WorkletFunction | undefined {\n  let worklet;\n  if (__DEV__) {\n    try {\n      worklet = getWorkletFromMetroRequire(workletHash, closureVariables);\n    } catch (_e) {\n      logger.error(\n        'Unable to resolve worklet with hash ' +\n          workletHash +\n          '. Try reloading the app.'\n      );\n    }\n  } else {\n    worklet = getWorkletFromMetroRequire(workletHash, closureVariables);\n  }\n  return worklet;\n}\n\nconst metroRequire = globalThis.__r;\n\nfunction getWorkletFromMetroRequire(\n  workletHash: number,\n  closureVariables: Record<string, unknown>\n): WorkletFunction {\n  const factory = metroRequire(workletHash).default as WorkletFactory;\n  return factory(closureVariables);\n}\n\ninterface ObjectToUnpack extends WorkletFunction {\n  _recur: unknown;\n}\n"],"mappings":"AAAA,YAAY;;AACZ,SAASA,MAAM,QAAQ,aAAU;AACjC,SAASC,aAAa,QAAQ,oBAAiB;AAG/C,MAAMC,WAAW,GAAG,IAAIC,OAAO,CAA2B,CAAC;AAE3D,OAAO,SAASC,mBAAmBA,CACjCC,cAA8B,EAC9BC,QAAiB,EACjBC,kBAA2B,EAClB;EACT,MAAMC,WAAW,GAAGH,cAAc,CAACI,aAAa;EAChD,IAAID,WAAW,KAAKE,SAAS,EAAE;IAC7B,OAAOC,UAAU,CAACH,WAAW,EAAEH,cAAc,CAACO,SAAS,CAAC;EAC1D,CAAC,MAAM,IAAIP,cAAc,CAACQ,MAAM,KAAKH,SAAS,EAAE;IAC9C,IAAII,KAAK,GAAGZ,WAAW,CAACa,GAAG,CAACV,cAAc,CAAC;IAC3C,IAAIS,KAAK,KAAKJ,SAAS,EAAE;MACvBI,KAAK,GAAGT,cAAc,CAACQ,MAAM,CAAC,CAAC;MAC/BX,WAAW,CAACc,GAAG,CAACX,cAAc,EAAES,KAAK,CAAC;IACxC;IACA,OAAOA,KAAK;EACd,CAAC,MAAM,IAAIR,QAAQ,KAAK,gBAAgB,EAAE;IACxC,MAAMW,oBAAoB,GAAGA,CAAA,KAAM;MACjC,MAAMC,KAAK,GAAGX,kBAAkB,GAC5B,cAAcA,kBAAkB,IAAI,GACpC,oBAAoB;MACxB,MAAM,IAAIN,aAAa,CAAC,6CAA6CiB,KAAK;AAChF,yKAAyK,CAAC;IACtK,CAAC;IACDD,oBAAoB,CAACE,gBAAgB,GAAGd,cAAc;IACtD,OAAOY,oBAAoB;EAC7B,CAAC,MAAM;IACL,MAAM,IAAIhB,aAAa,CACrB,0BAA0BK,QAAQ,wCAAwCc,UAAU,CAACC,SAAS,CAC5FhB,cACF,CAAC,IACH,CAAC;EACH;AACF;AAEA,SAASM,UAAUA,CACjBH,WAAmB,EACnBc,gBAAyC,EACZ;EAC7B,IAAIC,OAAO;EACX,IAAIC,OAAO,EAAE;IACX,IAAI;MACFD,OAAO,GAAGE,0BAA0B,CAACjB,WAAW,EAAEc,gBAAgB,CAAC;IACrE,CAAC,CAAC,OAAOI,EAAE,EAAE;MACX1B,MAAM,CAAC2B,KAAK,CACV,sCAAsC,GACpCnB,WAAW,GACX,0BACJ,CAAC;IACH;EACF,CAAC,MAAM;IACLe,OAAO,GAAGE,0BAA0B,CAACjB,WAAW,EAAEc,gBAAgB,CAAC;EACrE;EACA,OAAOC,OAAO;AAChB;AAEA,MAAMK,YAAY,GAAGR,UAAU,CAACS,GAAG;AAEnC,SAASJ,0BAA0BA,CACjCjB,WAAmB,EACnBc,gBAAyC,EACxB;EACjB,MAAMQ,OAAO,GAAGF,YAAY,CAACpB,WAAW,CAAC,CAACuB,OAAyB;EACnE,OAAOD,OAAO,CAACR,gBAAgB,CAAC;AAClC","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}